2022-07-08 18:26:34.012  WARN [api-gateway,,] 1185 --- [main] o.s.boot.StartupInfoLogger               : InetAddress.getLocalHost().getHostName() took 5006 milliseconds to respond. Please verify your network configuration (macOS machines may need to add entries to /etc/hosts).
2022-07-08 18:26:39.030  INFO [api-gateway,,] 1185 --- [main] com.example.apigw.ApiGwApplication       : Starting ApiGwApplication using Java 1.8.0_292 on Liliias-MacBook-Pro.local with PID 1185 (/Users/liliia/Documents/microservices/apigw/target/classes started by liliia in /Users/liliia/Documents/microservices)
2022-07-08 18:26:39.034  INFO [api-gateway,,] 1185 --- [main] com.example.apigw.ApiGwApplication       : No active profile set, falling back to 1 default profile: "default"
2022-07-08 18:26:43.994  INFO [api-gateway,,] 1185 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=2356fa7e-3e06-398d-9762-b0f6762bf8e9
2022-07-08 18:26:45.344  INFO [api-gateway,,] 1185 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-07-08 18:26:45.378  INFO [api-gateway,,] 1185 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig' of type [org.springframework.cloud.client.loadbalancer.reactive.LoadBalancerBeanPostProcessorAutoConfiguration$ReactorDeferringLoadBalancerFilterConfig] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-07-08 18:26:45.395  INFO [api-gateway,,] 1185 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'reactorDeferringLoadBalancerExchangeFilterFunction' of type [org.springframework.cloud.client.loadbalancer.reactive.DeferringLoadBalancerExchangeFilterFunction] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2022-07-08 18:26:46.725  INFO [api-gateway,,] 1185 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9004 (http)
2022-07-08 18:26:46.764  INFO [api-gateway,,] 1185 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2022-07-08 18:26:46.765  INFO [api-gateway,,] 1185 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.64]
2022-07-08 18:26:53.248  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [After]
2022-07-08 18:26:53.250  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Before]
2022-07-08 18:26:53.255  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Between]
2022-07-08 18:26:53.256  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Cookie]
2022-07-08 18:26:53.257  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Header]
2022-07-08 18:26:53.257  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Host]
2022-07-08 18:26:53.257  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Method]
2022-07-08 18:26:53.258  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Path]
2022-07-08 18:26:53.258  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Query]
2022-07-08 18:26:53.258  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [ReadBody]
2022-07-08 18:26:53.258  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [RemoteAddr]
2022-07-08 18:26:53.258  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [XForwardedRemoteAddr]
2022-07-08 18:26:53.258  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [Weight]
2022-07-08 18:26:53.258  INFO [api-gateway,,] 1185 --- [main] o.s.c.g.r.RouteDefinitionRouteLocator    : Loaded RoutePredicateFactory [CloudFoundryRouteService]
2022-07-08 18:26:55.117  INFO [api-gateway,,] 1185 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 19 endpoint(s) beneath base path '/actuator'
2022-07-08 18:26:57.355  INFO [api-gateway,,] 1185 --- [main] DiscoveryClientOptionalArgsConfiguration : Eureka HTTP Client uses RestTemplate.
2022-07-08 18:26:57.937  WARN [api-gateway,,] 1185 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2022-07-08 18:26:58.562  INFO [api-gateway,,] 1185 --- [main] o.s.c.n.eureka.InstanceInfoFactory       : Setting initial instance status as: STARTING
2022-07-08 18:26:58.733  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Initializing Eureka in region us-east-1
2022-07-08 18:26:58.739  INFO [api-gateway,,] 1185 --- [main] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 18:26:58.781  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-07-08 18:26:58.781  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-07-08 18:26:58.781  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-07-08 18:26:58.781  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-07-08 18:26:58.781  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-07-08 18:26:58.781  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Application version is -1: true
2022-07-08 18:26:58.781  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-07-08 18:27:01.591  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-07-08 18:27:01.625  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Starting heartbeat executor: renew interval is: 30
2022-07-08 18:27:01.643  INFO [api-gateway,,] 1185 --- [main] c.n.discovery.InstanceInfoReplicator     : InstanceInfoReplicator onDemand update allowed rate per min is 4
2022-07-08 18:27:01.662  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Discovery Client initialized at timestamp 1657297621653 with initial instances count: 0
2022-07-08 18:27:01.737  INFO [api-gateway,,] 1185 --- [main] o.s.c.n.e.s.EurekaServiceRegistry        : Registering application API-GATEWAY with eureka with status UP
2022-07-08 18:27:01.740  INFO [api-gateway,,] 1185 --- [main] com.netflix.discovery.DiscoveryClient    : Saw local status change event StatusChangeEvent [timestamp=1657297621740, current=UP, previous=STARTING]
2022-07-08 18:27:01.746  INFO [api-gateway,,] 1185 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_API-GATEWAY/192.168.1.128:api-gateway:9004: registering service...
2022-07-08 18:27:02.164  WARN [api-gateway,,] 1185 --- [pool-3-thread-1] o.s.c.s.a.z.ZipkinAutoConfiguration      : Check result of the [WebClientSender{http://localhost:9411/api/v2/spans}] contains an error [CheckResult{ok=false, error=java.util.concurrent.TimeoutException: Timed out after 1000ms}]
2022-07-08 18:27:02.411  INFO [api-gateway,,] 1185 --- [DiscoveryClient-InstanceInfoReplicator-0] com.netflix.discovery.DiscoveryClient    : DiscoveryClient_API-GATEWAY/192.168.1.128:api-gateway:9004 - registration status: 204
2022-07-08 18:27:02.483  INFO [api-gateway,,] 1185 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9004 (http) with context path ''
2022-07-08 18:27:02.487  INFO [api-gateway,,] 1185 --- [main] .s.c.n.e.s.EurekaAutoServiceRegistration : Updating port to 9004
2022-07-08 18:27:02.603  INFO [api-gateway,,] 1185 --- [main] com.example.apigw.ApiGwApplication       : Started ApiGwApplication in 44.89 seconds (JVM running for 45.664)
2022-07-08 18:27:22.690  WARN [api-gateway,,] 1185 --- [registrationTask1] d.c.b.a.c.r.ApplicationRegistrator       : Failed to register application as Application(name=api-gateway, managementUrl=http://192.168.1.128:9004/actuator, healthUrl=http://192.168.1.128:9004/actuator/health, serviceUrl=http://192.168.1.128:9004/) at spring-boot-admin ([http://localhost:9080/instances]): java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 5000ms in 'flatMap' (and no fallback has been configured). Further attempts are logged on DEBUG level
2022-07-08 18:27:23.714  WARN [api-gateway,,] 1185 --- [AsyncReporter{WebClientSender{http://localhost:9411/api/v2/spans}}] z.r.AsyncReporter$BoundedAsyncReporter   : Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2022-07-08 18:27:23.733  WARN [api-gateway,,] 1185 --- [AsyncReporter{WebClientSender{http://localhost:9411/api/v2/spans}}] z.r.AsyncReporter$BoundedAsyncReporter   : Dropped 1 spans due to WebClientRequestException(Connection refused: localhost/127.0.0.1:9411; nested exception is io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:9411)

org.springframework.web.reactive.function.client.WebClientRequestException: Connection refused: localhost/127.0.0.1:9411; nested exception is io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:9411
	at org.springframework.web.reactive.function.client.ExchangeFunctions$DefaultExchangeFunction.lambda$wrapException$9(ExchangeFunctions.java:141) ~[spring-webflux-5.3.21.jar:5.3.21]
	Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: 
Error has been observed at the following site(s):
	*__checkpoint â‡¢ Request to POST http://localhost:9411/api/v2/spans [DefaultWebClient]
Original Stack Trace:
		at org.springframework.web.reactive.function.client.ExchangeFunctions$DefaultExchangeFunction.lambda$wrapException$9(ExchangeFunctions.java:141) ~[spring-webflux-5.3.21.jar:5.3.21]
		at reactor.core.publisher.MonoErrorSupplied.subscribe(MonoErrorSupplied.java:55) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.Mono.subscribe(Mono.java:4397) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:103) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onError(FluxPeek.java:222) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onError(FluxPeek.java:222) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxPeek$PeekSubscriber.onError(FluxPeek.java:222) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.MonoNext$NextSubscriber.onError(MonoNext.java:93) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onError(MonoFlatMapMany.java:204) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.SerializedSubscriber.onError(SerializedSubscriber.java:124) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.whenError(FluxRetryWhen.java:225) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxRetryWhen$RetryWhenOtherSubscriber.onError(FluxRetryWhen.java:274) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.drain(FluxConcatMap.java:415) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.onNext(FluxConcatMap.java:251) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.EmitterProcessor.drain(EmitterProcessor.java:537) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.EmitterProcessor.tryEmitNext(EmitterProcessor.java:343) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.SinkManySerialized.tryEmitNext(SinkManySerialized.java:100) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxRetryWhen$RetryWhenMainSubscriber.onError(FluxRetryWhen.java:190) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.netty.http.client.HttpClientConnect$MonoHttpConnect$ClientTransportSubscriber.onError(HttpClientConnect.java:308) ~[reactor-netty-http-1.0.20.jar:1.0.20]
		at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.netty.resources.DefaultPooledConnectionProvider$DisposableAcquire.onError(DefaultPooledConnectionProvider.java:158) ~[reactor-netty-core-1.0.20.jar:1.0.20]
		at reactor.netty.internal.shaded.reactor.pool.AbstractPool$Borrower.fail(AbstractPool.java:475) ~[reactor-netty-core-1.0.20.jar:1.0.20]
		at reactor.netty.internal.shaded.reactor.pool.SimpleDequePool.lambda$drainLoop$9(SimpleDequePool.java:431) ~[reactor-netty-core-1.0.20.jar:1.0.20]
		at reactor.core.publisher.FluxDoOnEach$DoOnEachSubscriber.onError(FluxDoOnEach.java:186) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.MonoCreate$DefaultMonoSink.error(MonoCreate.java:201) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.netty.resources.DefaultPooledConnectionProvider$PooledConnectionAllocator$PooledConnectionInitializer.onError(DefaultPooledConnectionProvider.java:548) ~[reactor-netty-core-1.0.20.jar:1.0.20]
		at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondError(MonoFlatMap.java:192) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.MonoFlatMap$FlatMapInner.onError(MonoFlatMap.java:259) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:106) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.Operators.error(Operators.java:198) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.MonoError.subscribe(MonoError.java:53) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.Mono.subscribe(Mono.java:4397) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:103) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.netty.transport.TransportConnector$MonoChannelPromise.tryFailure(TransportConnector.java:534) ~[reactor-netty-core-1.0.20.jar:1.0.20]
		at reactor.netty.transport.TransportConnector$MonoChannelPromise.setFailure(TransportConnector.java:488) ~[reactor-netty-core-1.0.20.jar:1.0.20]
		at reactor.netty.transport.TransportConnector.lambda$doConnect$7(TransportConnector.java:223) ~[reactor-netty-core-1.0.20.jar:1.0.20]
		at io.netty.util.concurrent.DefaultPromise.notifyListener0(DefaultPromise.java:578) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.concurrent.DefaultPromise.notifyListeners0(DefaultPromise.java:571) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.concurrent.DefaultPromise.notifyListenersNow(DefaultPromise.java:550) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.concurrent.DefaultPromise.notifyListeners(DefaultPromise.java:491) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.concurrent.DefaultPromise.setValue0(DefaultPromise.java:616) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.concurrent.DefaultPromise.setFailure0(DefaultPromise.java:609) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.concurrent.DefaultPromise.tryFailure(DefaultPromise.java:117) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.fulfillConnectPromise(AbstractNioChannel.java:321) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:337) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
		at java.lang.Thread.run(Thread.java:748) [na:1.8.0_292]
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99) ~[reactor-core-3.4.19.jar:3.4.19]
		at reactor.core.publisher.Mono.block(Mono.java:1707) ~[reactor-core-3.4.19.jar:3.4.19]
		at org.springframework.cloud.sleuth.zipkin2.WebClientSender.post(WebClientSender.java:69) ~[spring-cloud-sleuth-zipkin-3.1.3.jar:3.1.3]
		at org.springframework.cloud.sleuth.zipkin2.WebClientSender.lambda$new$0(WebClientSender.java:63) ~[spring-cloud-sleuth-zipkin-3.1.3.jar:3.1.3]
		at org.springframework.cloud.sleuth.zipkin2.HttpSender.post(HttpSender.java:137) ~[spring-cloud-sleuth-zipkin-3.1.3.jar:3.1.3]
		at org.springframework.cloud.sleuth.zipkin2.HttpSender$HttpPostCall.doExecute(HttpSender.java:150) ~[spring-cloud-sleuth-zipkin-3.1.3.jar:3.1.3]
		at org.springframework.cloud.sleuth.zipkin2.HttpSender$HttpPostCall.doExecute(HttpSender.java:140) ~[spring-cloud-sleuth-zipkin-3.1.3.jar:3.1.3]
		at zipkin2.Call$Base.execute(Call.java:391) ~[zipkin-2.23.2.jar:na]
		at zipkin2.reporter.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:299) ~[zipkin-reporter-2.16.3.jar:na]
		at zipkin2.reporter.AsyncReporter$Flusher.run(AsyncReporter.java:378) [zipkin-reporter-2.16.3.jar:na]
		at java.lang.Thread.run(Thread.java:748) [na:1.8.0_292]
Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:9411
Caused by: java.net.ConnectException: Connection refused
	at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[na:1.8.0_292]
	at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:716) ~[na:1.8.0_292]
	at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
	at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.78.Final.jar:4.1.78.Final]
	at java.lang.Thread.run(Thread.java:748) [na:1.8.0_292]

2022-07-08 18:27:31.628  INFO [api-gateway,,] 1185 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Disable delta property : false
2022-07-08 18:27:31.631  INFO [api-gateway,,] 1185 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Single vip registry refresh property : null
2022-07-08 18:27:31.632  INFO [api-gateway,,] 1185 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Force full registry fetch : false
2022-07-08 18:27:31.632  INFO [api-gateway,,] 1185 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Application is null : false
2022-07-08 18:27:31.633  INFO [api-gateway,,] 1185 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Registered Applications size is zero : true
2022-07-08 18:27:31.633  INFO [api-gateway,,] 1185 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Application version is -1: false
2022-07-08 18:27:31.633  INFO [api-gateway,,] 1185 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : Getting all instance registry info from the eureka server
2022-07-08 18:27:31.684  INFO [api-gateway,,] 1185 --- [DiscoveryClient-CacheRefreshExecutor-0] com.netflix.discovery.DiscoveryClient    : The response status is 200
2022-07-08 18:27:37.812  INFO [api-gateway,,] 1185 --- [registrationTask1] d.c.b.a.c.r.ApplicationRegistrator       : Application registered itself as c866669c1c15
2022-07-08 18:31:58.787  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 18:33:54.058  WARN [api-gateway,,] 1185 --- [registrationTask1] d.c.b.a.c.r.ApplicationRegistrator       : Failed to register application as Application(name=api-gateway, managementUrl=http://192.168.1.128:9004/actuator, healthUrl=http://192.168.1.128:9004/actuator/health, serviceUrl=http://192.168.1.128:9004/) at spring-boot-admin ([http://localhost:9080/instances]): Connection refused: localhost/127.0.0.1:9080; nested exception is io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: localhost/127.0.0.1:9080. Further attempts are logged on DEBUG level
2022-07-08 18:36:58.798  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 18:41:58.807  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 18:43:03.483  WARN [api-gateway,,] 1185 --- [boundedElastic-1] o.s.c.s.a.i.r.SleuthReactorProperties    : You're using the deprecated [spring.sleuth.reactor.decorate-on-each] property. Please use the [spring.sleuth.reactor.instrumentation-type]
2022-07-08 18:43:03.495  WARN [api-gateway,,] 1185 --- [boundedElastic-1] o.s.c.s.a.i.r.SleuthReactorProperties    : You're using the deprecated [spring.sleuth.reactor.decorate-on-each] property. Please use the [spring.sleuth.reactor.instrumentation-type]
2022-07-08 18:46:58.804  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 18:51:58.813  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 18:56:58.820  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 19:01:58.830  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 19:06:58.854  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 19:11:46.684  WARN [api-gateway,,] 1185 --- [reactor-http-nio-4] r.netty.http.client.HttpClientConnect    : [93926b8c-2, L:0.0.0.0/0.0.0.0:50303 ! R:localhost/127.0.0.1:9411] The connection observed an error

reactor.netty.http.client.PrematureCloseException: Connection prematurely closed BEFORE response

2022-07-08 19:12:10.133  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 19:18:49.484  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 19:23:49.496  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
2022-07-08 19:28:49.508  INFO [api-gateway,,] 1185 --- [AsyncResolver-bootstrap-executor-0] c.n.d.s.r.aws.ConfigClusterResolver      : Resolving eureka endpoints via configuration
